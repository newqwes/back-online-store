{"version":3,"sources":["../../src/utils/orderMessage.js"],"names":["orderMessage","cart","customer","phone","email","city","home","street","apartment","rows","count","name","description","id","currencySign","options","price","weight","totalCost","sum","html","toFixed","to","process","env","MAIL_ADMIN"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,YAAY,GAAG,SAAfA,YAAe,OAAyE;AAAA,MAAtEC,IAAsE,QAAtEA,IAAsE;AAAA,2BAAhEC,QAAgE;AAAA,MAApDC,KAAoD,iBAApDA,KAAoD;AAAA,MAA7CC,KAA6C,iBAA7CA,KAA6C;AAAA,MAAtCC,IAAsC,iBAAtCA,IAAsC;AAAA,MAAhCC,IAAgC,iBAAhCA,IAAgC;AAAA,MAA1BC,MAA0B,iBAA1BA,MAA0B;AAAA,MAAlBC,SAAkB,iBAAlBA,SAAkB;AAC5F,MAAMC,IAAI,GAAG,iBACXR,IADW,EAEX;AAAA,QAAGS,KAAH,SAAGA,KAAH;AAAA,QAAUC,IAAV,SAAUA,IAAV;AAAA,QAAgBC,WAAhB,SAAgBA,WAAhB;AAAA,QAA6BC,EAA7B,SAA6BA,EAA7B;AAAA,QAAiCC,YAAjC,SAAiCA,YAAjC;AAAA,8BAA+CC,OAA/C;AAAA,QAA0DC,KAA1D,iBAA0DA,KAA1D;AAAA,QAAiEC,MAAjE,iBAAiEA,MAAjE;AAAA,6CAEQJ,EAFR,8BAGQF,IAHR,8BAIQC,WAJR,8BAKQF,KALR,8BAMQO,MANR,8BAOQD,KAAK,GAAGF,YAPhB;AAAA,GAFW,CAAb;;AAD4F,cAcnE,kBAAKb,IAAL,CAdmE;AAAA,MAcpFa,YAdoF,SAcpFA,YAdoF;;AAgB5F,MAAMI,SAAS,GAAG,oBAAOjB,IAAP,EAAa,UAACkB,GAAD;AAAA,QAAQT,KAAR,SAAQA,KAAR;AAAA,QAA0BM,KAA1B,SAAeD,OAAf,CAA0BC,KAA1B;AAAA,WAAwCG,GAAG,GAAGT,KAAK,GAAGM,KAAtD;AAAA,GAAb,EAA0E,CAA1E,CAAlB;AAEA,MAAMI,IAAI,qeAYJ,kBAAKX,IAAL,EAAW,EAAX,CAZI,sKAcyBS,SAAS,CAACG,OAAV,CAAkB,CAAlB,IAAuBP,YAdhD,uQAkBuBX,KAlBvB,eAkBiCA,KAlBjC,qEAmBQC,KAnBR,gEAoBQC,IApBR,gEAqBQE,MArBR,oDAsBMD,IAtBN,kFAuBWE,SAvBX,uBAAV;AA0BA,MAAMc,EAAE,GAAG,CAACC,OAAO,CAACC,GAAR,CAAYC,UAAb,EAAyBrB,KAAzB,CAAX;AAEA,SAAO;AAAEgB,IAAAA,IAAI,EAAJA,IAAF;AAAQE,IAAAA,EAAE,EAAFA;AAAR,GAAP;AACD,CA/CD;;eAiDetB,Y","sourcesContent":["import { head, reduce, join, map } from 'lodash';\n\nconst orderMessage = ({ cart, customer: { phone, email, city, home, street, apartment } }) => {\n  const rows = map(\n    cart,\n    ({ count, name, description, id, currencySign, options: { price, weight } }) => `\n      <tr>\n      <td>${id}</td>\n      <td>${name}</td>\n      <td>${description}</td>\n      <td>${count}</td>\n      <td>${weight}</td>\n      <td>${price + currencySign}</td>\n    </tr>`\n  );\n\n  const { currencySign } = head(cart);\n\n  const totalCost = reduce(cart, (sum, { count, options: { price } }) => sum + count * price, 0);\n\n  const html = `\n    <div>\n      <h2>Корзина</h2>\n      <table style=\"border-spacing: 30px;\">\n      <tr>\n        <th>ID товара</th>\n        <th>Название</th>\n        <th>Описание</th>\n        <th>Кол-во</th>\n        <th>Вес</th>\n        <th>Цена</th>\n      </tr>\n      ${join(rows, '')}\n      </table>\n      <h3> Общая стоимость заказа: ${totalCost.toFixed(2) + currencySign}</h3>\n    </div>\n    <div style='margin-top: 30px;'>\n      <h2>Данные пользователя</h2>\n      <div>Телефон: <a href='tel:${phone}'>${phone}</a> </div>\n      <div>Почта: ${email}</div>\n      <div>Город: ${city}</div>\n      <div>Улица: ${street}</div>\n      <div>Дом: ${home}</div>\n      <div>Квартира: ${apartment}</div>\n    </div>`;\n\n  const to = [process.env.MAIL_ADMIN, email];\n\n  return { html, to };\n};\n\nexport default orderMessage;\n"],"file":"orderMessage.js"}